<!DOCTYPE html>
<html lang="en" xmlns="https://www.thymeleaf.org">

<head>
    <title>Tin tức</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <link rel="stylesheet" th:href="@{/css/news.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}">

    <!-- Boxicons.css -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        .pagination-buttons button {
            padding: 8px 12px;
            margin: 0 4px;
            border: 1px solid #ccc;
            background-color: #f7f7f7;
            color: #333;
            cursor: pointer;
        }

        .pagination-buttons button:hover {
            background-color: #ddd;
        }

        .pagination-info {
            margin-top: 10px;
        }

        .next-button {
            padding: 8px 16px;
            background-color: #f7f7f7;
            color: #333;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .next-button:hover {
            background-color: #ddd;
        }

        .next-button i {
            margin-left: 5px;
            transition: transform 0.3s ease;
        }

        .next-button:hover i {
            transform: translateX(2px);
        }

        .previous-button {
            padding: 8px 16px;
            background-color: #f7f7f7;
            color: #333;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .previous-button:hover {
            background-color: #ddd;
        }

        .previous-button i {
            margin-right: 5px;
            transition: transform 0.3s ease;
        }

        .previous-button:hover i {
            transform: translateX(-2px);
        }
    </style>
</head>

<body ng-app="favoriteRoomApp" ng-controller="favoriteRoomCtrl">
    <div th:replace="~{/layout/header.html}"></div>


    <main>

        <div class="container" ng-controller="favoriteRoomCtrl">
            <div class="row" style="margin-top: 10rem; margin-bottom: 10px;">
                <div class="col-12" style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a th:href="@{/index}">Trang chủ</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Trang yêu thích</li>
                    </ol>
                </div>
            </div>
            <div>
                <h3>TRANG YÊU THÍCH</h3>
                <div class="label">
                    <label for="exampleFormControlInput1" class="form-label"
                        style="margin-bottom: 10px; margin-top: 15px;">Sắp xếp:</label>
                    <select class="form-select " style="width: 130px;" name="sortDir" id="sortDirTime"
                        onchange="sortCards()">
                        <option value="desc" th:selected="${sortDir == 'desc'}">Mới nhất</option>
                        <option value="asc" th:selected="${sortDir == 'asc'}">Cũ nhất</option>
                    </select>

                </div>
                <hr>
            </div>
            <div class="p-5">
                <div class="card mb-3" style="background-color: #545454; color: #dcbf7d"
                    ng-repeat="favoriteRoom in pageRange()">
                    <div class="row g-0">
                        <div class="col-md-4 p-2">
                            <img class="img-fluid" style="height: 100%" th:src="@{/img/phong tro.jpg}" alt="" />
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-10">
                                        <p class="card-text">{{favoriteRoom.posts[$index].title}}</p>
                                    </div>
                                    <div class="col-2">
                                        <img class="" style="max-width: 75%; max-height: 75%;"
                                            th:src="@{/img/icons8-heart-50-red.png}"
                                            ng-click="deleteFavoriteRoom(favoriteRoom.favoriteRoom[0].favoriteRoomId)"
                                            id="img" alt="" />
                                    </div>
                                </div>
                                <h4 class="card-title mt-1">
                                    {{favoriteRoom.roomCash[$index].roomBill}} triệu/tháng</h4>
                                <div class="row py-0 p-0">
                                    <div class="col-4 card-text">
                                        <img class="" style="max-height: 30% ; max-width: 30%;"
                                            th:src="@{/img/block.png}" alt="" />
                                        Diện tích: {{favoriteRoom.length*favoriteRoom.width}}
                                    </div>
                                    <div class="col-4 card-text">
                                        <img class="" style="max-height: 30% ; max-width: 30%;"
                                            th:src="@{/img/double-bed.png}" alt="" />
                                        {{ favoriteRoom.categoryRoom.title}}
                                    </div>
                                    <div class="col-4 card-text">
                                        <img class="" style="max-height: 30% ; max-width: 30%;"
                                            th:src="@{/img/wifi.png}" alt="" />
                                        {{ favoriteRoom.wifiCash[0].wifiBill == 0 ?
                                        0:favoriteRoom.wifiCash[0].wifiBill}} VND
                                    </div>
                                </div>
                                <div class="card-person py-0 p-0">
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <h6 class="card-text mb-0 createDate">
                                                {{favoriteRoom.posts[$index].createDate
                                                |
                                                date:'dd-MM-yyyy' }}</h6>
                                        </div>
                                        <div class="col-lg-6">
                                            <h6 class="card-text ward d-inline-block">
                                                {{favoriteRoom.motel.ward}}
                                            </h6>,
                                            <h6 class="card-text district d-inline-block">
                                                {{favoriteRoom.motel.district}}
                                            </h6>,
                                            <h6 class="card-text city d-inline-block ml-2">
                                                {{favoriteRoom.motel.province}}</h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Nút chuyển trang -->
                <div class="pagination-buttons d-flex justify-content-center">
                    <button ng-disabled="currentPage == 1" ng-click="currentPage = currentPage - 1"
                        class="previous-button"><i class="fa-solid fa-angles-left"></i>Previous</button>
                    <div class="pagination-info">
                        <span>{{currentPage}} of {{totalPages()}}</span>
                    </div>
                    <button ng-disabled="currentPage >= totalPages()" ng-click="currentPage = currentPage + 1"
                        class="next-button">Next <i class="fa-solid fa-angles-right"></i></button>
                </div>
            </div>
        </div>
    </main>



    <div th:replace="~{/layout/footer}"></div>

    <!-- Bootstrap JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paginationjs/2.1.5/pagination.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script th:src="@{/js/header.js}"></script>
    <script th:src="@{/js/favoriteroom.js}"></script>
    <script th:inline="javascript">
        function sortCards() {
            var selectElement = document.getElementById("sortDirTime");
            var selectedValue = selectElement.value;

            // Lấy danh sách các card
            var cards = document.querySelectorAll(".card.mb-3");

            // Sắp xếp các card dựa trên giá trị được chọn
            if (selectedValue === "desc") {
                // Sắp xếp theo thứ tự giảm dần của ngày
                cards.forEach(function (card) {
                    var cardCreateDate = new Date(card.querySelector(".createDate").innerText);
                    card.parentNode.prepend(card);
                });
            } else if (selectedValue === "asc") {
                // Sắp xếp theo thứ tự tăng dần của ngày
                var sortedCards = Array.from(cards).sort(function (a, b) {
                    var dateA = new Date(a.querySelector(".createDate").innerText);
                    var dateB = new Date(b.querySelector(".createDate").innerText);
                    return dateA - dateB;
                });
                sortedCards.forEach(function (card) {
                    card.parentNode.appendChild(card);
                });
            }
        }

    </script>
</body>

</html>